<div class="container">
    <form [formGroup]="form">
        <div>
            <h1>Welcome {{user}}</h1>
            <h3>Now you have to fill the generic settings of the signal you want to generate.</h3>
        </div>
        <mat-form-field>
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker" [max]="maxDate" [min]="minDate">
                <input matStartDate formControlName="start" placeholder="Start date">
                <input matEndDate formControlName="end" placeholder="End date">
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error *ngIf="range.controls['start'].hasError('matStartDateInvalid')">Invalid start date</mat-error>
            <mat-error *ngIf="range.controls['end'].hasError('matEndDateInvalid')">Invalid end date</mat-error>
        </mat-form-field>
        <mat-form-field>
            <mat-label>Frequency</mat-label>
            <input matInput placeholder="Frequency" formControlName="frequency" />
            <mat-error *ngIf="form.controls['frequency'].invalid">{{getErrorMessage('frequency')}}</mat-error>
            <mat-hint>Frequency of the generated signal (from 0.1 to 10)</mat-hint>
        </mat-form-field>
        <mat-form-field>
            <mat-label>Step</mat-label>
            <input matInput placeholder="Step" formControlName="step" />
            <mat-error *ngIf="form.controls['step'].invalid">{{getErrorMessage('step')}}</mat-error>
            <mat-hint>Step in milliseconds of the generated values from (200ms to 600000ms)</mat-hint>
        </mat-form-field>
        <mat-form-field>
            <mat-label>Line pattern</mat-label>
            <textarea matInput placeholder="Line pattern" formControlName="linePattern"></textarea>
            <mat-hint>The line pattern used when generating output rows</mat-hint>
            <mat-error *ngIf="form.controls['linePattern'].invalid">{{getErrorMessage('linePattern')}}</mat-error>
            <mat-icon matSuffix (click)="toggleLinePatternHelpVisibility()">help</mat-icon>
        </mat-form-field>
        <mat-card *ngIf="linePatternHelpVisibility">
            <mat-card-content>Help: TODO</mat-card-content>
          </mat-card>
        <mat-form-field>
            <mat-label>Signal</mat-label>
            <mat-select placeholder="Signal" formControlName="signal">
                <mat-option *ngFor="let s of availableSignals$ | async; let i = index" [value]="s.name">{{s.name}}</mat-option>
            </mat-select>
            <mat-error *ngIf="form.controls['signal'].invalid">{{getErrorMessage('signal')}}</mat-error>
            <mat-hint>The signal to use</mat-hint>
        </mat-form-field>
        <div class="buttons-container">
            <button mat-raised-button (click)="cancel()" color="warn">Cancel</button>
            <button mat-raised-button (click)="back()">Back</button>
            <button mat-raised-button (click)="submit()" [disabled]="!formValid" type="submit"
                color="primary">Next</button>
        </div>
    </form>
</div>